{
  "prompts": [
    "**10_Refactor_Canvas_Architecture**: REFACTORIZACIÓN ESTRUCTURAL. El archivo `EditorCanvas.tsx` ha crecido demasiado. Necesito que separes los componentes internos en archivos dedicados para mejorar la mantenibilidad antes de añadir nuevas funcionalidades.\n\n**Instrucciones:**\n1. Crea una carpeta `src/features/EditorEntrenamiento/components/canvas/`.\n2. Extrae `ExerciseRowItem` y `SortableExerciseRow` a `ExerciseRow.tsx`.\n3. Extrae `TrainingBlock` a `TrainingBlock.tsx`.\n4. Extrae `DayCard` a `DayCard.tsx`.\n5. Mantén `EditorCanvas.tsx` limpio, importando estos componentes y gestionando solo el estado global del DND (`DndContext`) y el layout del grid.\n\n**Referencias:**\n- Revisa el código actual de `EditorCanvas.tsx` para mover las interfaces y props correspondientes.",
    "**11_Implement_Excel_View**: NUEVA VISTA. Implementa la 'Vista Excel' (actualmente un placeholder) que es crítica según el análisis.\n\n**Instrucciones:**\n1. Crea el componente `src/features/EditorEntrenamiento/components/views/ExcelView.tsx`.\n2. Implementa una tabla densa donde las filas sean ejercicios y las columnas propiedades (Semana, Día, Ejercicio, Series, Reps, RPE).\n3. Permite la edición en línea (inputs transparentes) de las celdas.\n4. Añade checkboxes al inicio de cada fila para permitir acciones masivas futuras.\n5. Integra esta vista en `EditorCanvas.tsx` renderizándola condicionalmente cuando el selector de vistas (creado en el prompt 01) esté en modo 'Excel'.\n\n**Referencias:**\n- Revisa la sección 'Vista 2: EXCEL' en `editor_entrenamiento_definitivo.md` para el diseño visual.",
    "**12_Implement_Batch_Wizard**: FUNCIONALIDAD CRÍTICA. Implementa el Wizard de 'BatchTraining' que falta, sustituyendo los botones sueltos actuales.\n\n**Instrucciones:**\n1. Crea `src/features/EditorEntrenamiento/components/modals/BatchTrainingWizard.tsx`.\n2. Diseña un modal con 3 pasos (Stepper visual): '1. Selección', '2. Configuración', '3. Confirmación'.\n3. En el paso 1, muestra opciones grandes tipo tarjeta: 'Duplicar Semana', 'Progresión Lineal', 'Ajuste Masivo'.\n4. Conecta el botón '[⚡ BatchTraining]' del Footer para abrir este modal.\n\n**Referencias:**\n- Revisa la sección 'BATCHTRAINING REDISEÑADO' en `editor_entrenamiento_definitivo.md` para la lógica de cada paso.",
    "**13_Logic_Separation_FitCoach**: LÓGICA DE NEGOCIO. La lógica del chat en `FitCoachPanel.tsx` está hardcodeada dentro del componente UI. Extráela a un custom hook.\n\n**Instrucciones:**\n1. Crea `src/features/EditorEntrenamiento/hooks/useFitCoach.ts`.\n2. Mueve los estados `messages`, `alerts`, `inputMessage` y la función `handleSendMessage` al hook.\n3. Mejora `handleSendMessage` para que incluya un sistema básico de coincidencia de palabras clave (keywords) que simule mejor la IA (ej: detectar 'rodilla' y sugerir cambios de ejercicios, detectar 'tiempo' y sugerir condensar).\n4. El componente `FitCoachPanel` debe quedar puramente presentacional, consumiendo el hook.\n\n**Referencias:**\n- Revisa el análisis de 'Panel Derecho' en `analisis-implementacion-editor.md`.",
    "**14_Library_Drag_Integration**: INTERACCIÓN ENTRE PANELES. Conecta el Drag & Drop del `LibraryPanel` con el `EditorCanvas`.\n\n**Instrucciones:**\n1. En `EditorCanvas.tsx` (o un hook nuevo `useCanvasDnd.ts`), actualiza la función `handleDragEnd`.\n2. Detecta si el item soltado (`active.data.current`) proviene de la librería (tiene `itemType: 'exercise'` o `'block'`).\n3. Si cae sobre un `DayCard` (zona droppable), añade ese ejercicio/bloque al estado de los datos del día correspondiente.\n4. Asegura que se genere un ID único para el nuevo item insertado para evitar conflictos de claves en React.\n\n**Referencias:**\n- Revisa `LibraryPanel.tsx` para ver la estructura de datos que se envía al arrastrar.",
    "**15_SmartFill_Implementation**: INTEGRACIÓN DE LÓGICA. Integra la lógica de `SmartFillSolver` (mencionada en el análisis como existente en otros archivos) dentro de la interfaz del editor.\n\n**Instrucciones:**\n1. Localiza o recrea la lógica de `SmartFill` (resolver restricciones de tiempo/material).\n2. En `DayCard.tsx`, añade un botón o menú contextual '⚡ Smart Fill'.\n3. Al hacer click, abre un pequeño modal/popover pidiendo restricciones (ej: 'Tiempo disponible: 30min').\n4. Al confirmar, ejecuta el solver y actualiza los bloques del día priorizando ejercicios compuestos y eliminando accesorios según el límite de tiempo.\n\n**Referencias:**\n- Revisa la sección 'Smart Fill & Sustituciones' en `editor_entrenamiento_definitivo.md`.",
    "**16_Tags_Management_UI**: MEJORA DE UX. El sistema de tags en las tarjetas de día (`DayCard`) es solo visual. Hazlo interactivo.\n\n**Instrucciones:**\n1. En `DayCard.tsx`, permite hacer click en el área de tags para entrar en modo edición.\n2. Implementa un input de autocompletado que sugiera tags existentes (#Fuerza, #Hipertrofia).\n3. Permite eliminar tags con un botón (x) pequeño.\n4. Asegura que los cambios en los tags actualicen el estado global del programa.\n\n**Referencias:**\n- Revisa la sección 'SISTEMA DE TAGS PARA DÍAS' en `editor_entrenamiento_definitivo.md`."
  ]
}
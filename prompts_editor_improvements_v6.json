{
  "prompts": [
    "**51_Dynamic_Load_Calculator**: LÓGICA DE NEGOCIO. **ÁMBITO: SOLO `src/features/EditorEntrenamiento`**. Implementa la lógica para calcular pesos automáticamente basados en porcentajes de 1RM.\n\n**Instrucciones:**\n1. Crea `src/features/EditorEntrenamiento/utils/loadCalculator.ts`.\n2. Implementa una función que acepte `(percentage, exerciseId, clientStats)` y devuelva el peso en Kg/Lbs.\n3. En `ExerciseRow.tsx`, si el usuario introduce '80%', muestra visualmente (en gris o tooltip) el cálculo real: '80% (80kg)'.\n4. Asegura que si no hay 1RM registrado para ese ejercicio, solicite estimarlo o muestre una advertencia suave.\n\n**Referencias Visuales y de Diseño:**\n- Revisa los campos `@80% 1RM` en la sección **3. VISTA SEMANAL - DÍA EXPANDIDO** de `@diagramas_visuales_mejorados.md`.",
    "**52_AI_Program_Generator_Wizard**: FLUJO PRINCIPAL. **ÁMBITO: SOLO `src/features/EditorEntrenamiento`**. Implementa el Modal de Generación de Programa con IA (distinto al chat lateral).\n\n**Instrucciones:**\n1. Crea `src/features/EditorEntrenamiento/components/modals/AIProgramGenerator.tsx`.\n2. Implementa una interfaz conversacional 'Step-by-Step' dentro del modal (no chat libre, sino flujo guiado: Objetivo -> Días -> Limitaciones).\n3. Muestra el estado de carga '✨ Generando programa...' con una barra de progreso falsa que lista pasos ('Estructurando semana', 'Balanceando volumen...').\n4. Al finalizar, presenta un resumen antes de volcar los datos al Canvas.\n\n**Referencias Visuales y de Diseño:**\n- Sigue al pie de la letra la sección **4. GENERACIÓN DE PROGRAMA CON IA CONVERSACIONAL** en `@editor_entrenamiento_definitivo.md`.",
    "**53_Excel_Bulk_Actions_Logic**: INTERACCIÓN AVANZADA. **ÁMBITO: SOLO `src/features/EditorEntrenamiento`**. Implementa la lógica para las acciones masivas en la Vista Excel.\n\n**Instrucciones:**\n1. En `ExcelView.tsx` (o un hook asociado), gestiona el estado de filas seleccionadas (`selectedRowIds`).\n2. Implementa la barra flotante de acciones que aparece al seleccionar >1 fila.\n3. Codifica la lógica para: 'Cambiar RPE a X para todos los seleccionados', 'Multiplicar series por 1.2 (Aumentar 20%)'.\n4. Asegura que estas acciones se registren en el historial de Undo/Redo.\n\n**Referencias Visuales y de Diseño:**\n- Revisa el cuadro '⚡ EDICIÓN MASIVA' dentro de la sección **Vista 2: EXCEL** en `@editor_entrenamiento_definitivo.md`.",
    "**54_Integrated_Timer_Widget**: UTILIDAD. **ÁMBITO: SOLO `src/features/EditorEntrenamiento`**. Implementa el widget de cronómetro/temporizador para bloques tipo EMOM/AMRAP.\n\n**Instrucciones:**\n1. Crea `src/features/EditorEntrenamiento/components/tools/TimerWidget.tsx`.\n2. Debe soportar modos: Cuenta regresiva (Rest), Cronómetro (For time), e Intervalos (Tabata/EMOM).\n3. En `TrainingBlock.tsx`, si el bloque es tipo 'Conditioning' o 'EMOM', muestra un botón pequeño para abrir este timer pre-configurado con los tiempos del bloque.\n4. Debe ser flotante (draggable) para no tapar el contenido.\n\n**Referencias:**\n- Mencionado en 'Integraciones útiles' de `Editorentrenamiento2.md`: 'Reloj/cronómetro integrado para EMOM/AMRAP'.",
    "**55_Layout_Density_Control**: PERSONALIZACIÓN UI. **ÁMBITO: SOLO `src/features/EditorEntrenamiento`**. Permite al usuario cambiar la densidad de la información en el canvas.\n\n**Instrucciones:**\n1. En `EditorCanvas.tsx`, consume una preferencia de usuario `density`: 'compact' | 'comfortable'.\n2. Ajusta los paddings y tamaños de fuente en `DayCard` y `ExerciseRow` usando variables CSS o clases condicionales de Tailwind.\n3. En modo 'Compacto', oculta elementos secundarios como 'Instrucciones' o 'Avatares de video' para mostrar más días en pantalla.\n\n**Referencias:**\n- Mejora la 'Usabilidad Percibida' para usuarios avanzados que prefieren densidad de datos (Excel-like).",
    "**56_Empty_State_Experience**: UX/UI. **ÁMBITO: SOLO `src/features/EditorEntrenamiento`**. Mejora la experiencia cuando un día o semana está vacío.\n\n**Instrucciones:**\n1. Crea componentes dedicados: `EmptyDayState.tsx` y `EmptyWeekState.tsx`.\n2. En lugar de un espacio en blanco, muestra 'Call to Actions' claros: 'Arrastra un bloque aquí', 'Copiar del Lunes', 'Usar Asistente IA'.\n3. Implementa un diseño visual sutil (dashed borders, iconos grises) que invite a la interacción sin ensuciar la interfaz.\n\n**Referencias Visuales y de Diseño:**\n- Observa el placeholder 'Vacío' en el diagrama de la **12. VISTA TIMELINE** de `@diagramas_visuales_mejorados.md` y expándelo.",
    "**57_Advanced_Drag_Preview**: FEEDBACK VISUAL. **ÁMBITO: SOLO `src/features/EditorEntrenamiento`**. Mejora la 'Ghost Image' al arrastrar elementos complejos.\n\n**Instrucciones:**\n1. Crea un componente `DragPreview.tsx` que se renderice dentro del `DragOverlay`.\n2. Si arrastro un `DayCard`, la previsualización debe ser una versión compacta/opaca de la tarjeta, no el elemento completo gigante.\n3. Si arrastro desde la Librería, muestra una tarjeta limpia con el icono y nombre, indicando claramente 'Añadir a [Día hover]'.\n4. Añade indicadores de 'No permitido' (cursor not-allowed) si intento soltar un Bloque dentro de un Ejercicio.\n\n**Referencias:**\n- Refuerza el principio de 'Feedback inmediato' de `@editor_entrenamiento_definitivo.md`.",
    "**58_Tag_Management_CRUD**: GESTIÓN DE DATOS. **ÁMBITO: SOLO `src/features/EditorEntrenamiento`**. Permite crear, editar colores y eliminar tags personalizados.\n\n**Instrucciones:**\n1. Crea `src/features/EditorEntrenamiento/components/modals/TagManagerModal.tsx`.\n2. Lista todos los tags usados en el programa y los disponibles globalmente.\n3. Implementa un selector de color (círculos de colores predefinidos) para asignar a cada tag.\n4. Permite fusionar tags (ej: convertir todos los 'Glúteo' en 'Cadera').\n\n**Referencias Visuales y de Diseño:**\n- Expande la funcionalidad mostrada en el 'Dropdown de Tags' de la sección **11. SISTEMA DE TAGS** en `@diagramas_visuales_mejorados.md`.",
    "**59_Natural_Language_Parser**: INPUT RÁPIDO. **ÁMBITO: SOLO `src/features/EditorEntrenamiento`**. Implementa un parser de texto a estructura de ejercicio.\n\n**Instrucciones:**\n1. Crea `src/features/EditorEntrenamiento/utils/textParser.ts`.\n2. Implementa una función que convierta strings como \"Sentadilla 4x8 @80%\" en objetos `{ name: 'Sentadilla', sets: 4, reps: 8, intensity: '80%' }`.\n3. En `DayCard.tsx`, añade un input de texto rápido al final de la lista de ejercicios ('Añadir rápido...').\n4. Al pulsar Enter, usa el parser para crear el ejercicio estructurado instantáneamente.\n\n**Referencias:**\n- Mencionado como 'Búsqueda natural' en `Editorentrenamiento2.md`.",
    "**60_React_Memo_Optimization**: PERFORMANCE. **ÁMBITO: SOLO `src/features/EditorEntrenamiento`**. Optimiza el renderizado para evitar lag en programas grandes.\n\n**Instrucciones:**\n1. Aplica `React.memo` a `DayCard`, `TrainingBlock` y `ExerciseRow` con funciones de comparación personalizadas (`arePropsEqual`) si es necesario.\n2. Asegura que las funciones pasadas como props (`onUpdate`, `onDelete`) estén envueltas en `useCallback` en el componente padre.\n3. Implementa selectores memoizados (`useMemo`) para los cálculos derivados (volumen total, RPE promedio) para no recalcular en cada render.\n\n**Referencias:**\n- Crítico para mantener la 'Confianza en la Interfaz' y fluidez (60fps) descrita en la visión del producto."
  ]
}